<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="html/include/head :: headerLayout"></th:block>

<body>
<header th:include="~{/html/include/header :: header}" class="header includeJs"></header><header th:include="~{/html/include/header :: header}" class="header includeJs"></header>

	<div class="container">
		<section class="section mypage">
			<p class="section-tit">마이페이지</p>
			<form method="post" action="">

			<div class="mypage-top">
				<div class="mypage-box">
					<div class="image-area"></div>
					<div class="tit">프로필 사진</div>
					<div class="btn-wrap left">
						<button type="button" class="btn btn-lg btn-line btn-round type2">
							프로필 사진 변경
						</button>
					</div>
				</div>
			</div>

			<div class="mypage-bottom mg-t--40">
				<label class="input-label">내 시크릿 코드</label>
				<div class="input-wrap">
					<input type="text" class="input-text" th:value="${member.secretCode}" readonly id="mypage-secret"/>
					<button type="button" class="btn btn-lg btn-line btn-round type2" id="mypage-secretBtn">
						시크릿 코드 생성
					</button>
				</div>

				<label class="input-label required">애칭</label>
				<div class="input-wrap">
					<input name="nickname" type="text" class="input-text"
						   th:value="${member.nickname}" readonly id="mypage-nickname"/>

					<button type="button" class="btn btn-lg btn-line btn-round type2"
							onclick="inputEnable('mypage-nickname')">
						애칭 변경
					</button>
				</div>
				<label class="input-label required">이메일</label>
				<div class="input-wrap">
					<input type="text" class="input-text"
						   th:value="${member.email}" readonly
						   name="email" id="mypage-email"/>

					<button type="button" class="btn btn-lg btn-line btn-round type2"
							onclick="inputEnable('mypage-email')">
						이메일 변경
					</button>
				</div>
				<div class="input-wrap mg-t--40 mg-b--20">
					<button type="button" class="btn btn-line btn-full type2 mg-l--0">
						비밀번호 변경(버튼 누르면 모달창 쌈@뽕하게 뜸)
					</button>
				</div>
			</div>


			<div class="mg-t--30 mg-b--80 txt-right">
				<button type="button" class="btn txt-c--grey" onclick="location.href='user_secession.html'">회원 탈퇴
					하시겠습니까?</button>
			</div>
			<div class="btn-wrap type2 mg-t40">
				<button type="button" class="btn btn-half btn-line">
					취소
				</button>
				<button type="submit" class="btn btn-half type2 btn-pink">
					회원 정보 수정
				</button>
			</div>
			</form>
		</section>
	</div>

	<!-- 비밀번호 변경 버튼 누르면 뜨는 모달창-->
	<div class="modal">
		<div class="modal-dim"></div>
		<div class="modal-con">
			<label class="type2">
				<label class="input-label required">기존 비밀번호</label>
				<div class="input-wrap">
					<input type="password" class="input-text" />
				</div>

				<label class="input-label required">새로운 비밀번호</label>
				<div class="input-wrap">
					<input type="password" class="input-text" />
				</div>

				<label class="input-label required">비밀번호 재입력</label>
				<div class="input-wrap">
					<input type="password" class="input-text" />
				</div>
			</label>

			<div class="btn-wrap">
				<button type="button" class="btn btn-full btn-primary btn-round"
					onclick="location.href='refunds_4.html'" disabled>
					비밀번호 변경
				</button>
			</div>
		</div>
	</div>

<div th:replace="~{/html/include/footer :: footer}"></div>
<script>
	const localAutoHyphen = (target) => {
		target.value = target.value
				.replace(/[^0-9]/g, '')
				.replace(/^(\d{2,4})(\d{1,2})(\d{1,2})$/, `$1-$2-$3`);
	}

	const phoneAutoHyphen = (target) => {
		target.value = target.value
				.replace(/[^0-9]/g, '')
				.replace(/^(\d{0,3})(\d{0,4})(\d{0,4})$/g, "$1-$2-$3").replace(/(\-{1,2})$/g, "");
	}

	function inputEnable(targetId){
		document.getElementById(targetId).readOnly=false;
	}

	function secretCodeButtonDisplay(){
		const secretCode = document.getElementById("mypage-secret").value;

		if(secretCode.length>0){
			console.log(secretCode.length>0);
			document.getElementById("mypage-secretBtn").style.display='none';
		} else {
			document.getElementById("mypage-secretBtn").style.display='block';
		}
	}

	secretCodeButtonDisplay();
</script>
</body>

</html>