<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="html/include/head :: headerLayout"></th:block>
<meta
        content="text/html;charset=utf-8"
        http-equiv="Content-Type"
/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta
        content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"
        name="viewport"
/>
<style>
    @media (max-width: 1290px){
        .container { margin: 0 auto; padding: 0; }
    }


    @media all and (max-width:660px )and (max-height: 844px){

        .section{
            padding-top: 20%;
            width: 80%;
            height: 80%;
        }
        .fileBOX{
            padding-top: 5%;
        }
    }
    .section{
        width: 80%;
        height: 80%;
        padding-bottom: 5%;
    }
    .fileBOX{
        padding-top: 5%;
    }


    .F-width{
        width: 80%;
    }
    .rowflex{
        display: flex;
        flex-direction: row;
        padding-bottom: 5%;
        padding-top: 2%;
    }
    .cnenen{
        margin: 0px 0px 0px ;
    }
    .date-wrap{
        display: flex;
        justify-content: space-between;
    }

    .date-wrap .date-box{flex: 0 1 45%}

    textarea{resize: none}
</style>

<body>
<!--  <header data-include-file="html/include/header.html" class="header includeJs"></header>-->
<header th:include="~{/html/include/header :: header}" class="header includeJs"></header>
<div class="container">
    <section class="section album-write">
        <p class="section-tit">타임캡슐 게시물 작성하기</p>

        <form method="post" action="/timecapsule/write">
            <label class="input-label required">제목</label>
            <div class="input-wrap">
                <input type="text" id="tctitle" name="tctitle" class="input-text" placeholder="제목을 입력해주세요"/>
            </div>
            <div class="date-wrap input-wrap mg-t--30">
                <div class="date-box">
                    <label class="input-label required cnenen">봉인일</label>
                    <div class="input-wrap">
                        <input type="date" id="tcsealingdate" name="tcsealingdate" class="input-text" placeholder="20XX-XX-XX" />
                    </div>
                </div>
                <div class="date-box">
                    <label class="input-label required cnenen">개봉일</label>
                    <div class="input-wrap">
                        <input type="date" id="tcreleasedate" name="tcreleasedate" class="input-text" placeholder="20XX-XX-XX" />
                    </div>
                </div>
            </div>

            <label class="input-label required">내용</label>
            <div class="textarea-wrap">
                <textarea id="tcdetail" name="tcdetail" placeholder="내용을 입력해주세요" ></textarea>
            </div>

        <div class="mg-t--30">
            <label class="input-label required">첨부파일</label>
                <div class="upload-section input-wrap" onclick="document.getElementById('file-input').click();">
                    <input class="upload-name" type="file" id="file-input" accept="image/*" multiple onchange="previewImages()">
                    <div class="preview" id="preview" style="text-align: center" >눌러서 파일을 첨부해주세요</div>
                </div>
        </div>

            <div class="btn-wrap type2 mg-t40">

                <button type="button" class="btn btn-half btn-line" onclick="location.href=''">
                    취소
                </button>
                <button onclick="submitPost()" type="submit" class="btn btn-half type2 btn-pink">
                    작성완료
                </button>

            </div>
        </form>
    </section>

</div>
<div th:replace="~{/html/include/footer :: footer}"></div>
<script>
    $("#file").on('change', function () {
        var fileName = $("#file").val();
        $(".upload-name").val(fileName);
    });
</script>
</body>


<!--<head>-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->

    <style>

        .fileBOX{
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-content: center;
            align-items: center;
            padding-top: 3%;
        }

        .upload-section {
            text-align: center;
            cursor: pointer;
            flex: 1; width: 100%;padding: 0 20px;font-size: 1.5rem;background-color: #fff;border: 2px solid #ddd;border-radius: 8px;font-weight: 400;color: #333;height: 50px;
        }

        .input-file {display: flex; width: 100%;}
        .input-file .upload-name {flex: 1; width: 100%;padding: 0 20px;font-size: 1.5rem;background-color: #fff;border: 2px solid #ddd;border-radius: 8px;font-weight: 400;color: #333;height: 50px;}
        .input-file label {display: flex; align-items: center; padding: 0 20px; color: #fff;vertical-align: middle;background-color: #FF979B;cursor: pointer;height: 50px;margin-left: 10px; font-size: 1.4rem; border-radius: 8px;}
        .input-file input[type="file"] {position: absolute;width: 0;height: 0;padding: 0;overflow: hidden;border: 0;}
        /*.container{*/
        /*    display: flex;*/
        /*}*/
        .capsule{
            margin:10px;
            border:1px solid #ddd;
            border-radius:50px;
            overflow:hidden;
            width: 350px;
            background-color:#fff
        }
        .capsule img{
            width:100%;
            cursor:pointer;
        }
        .cenBOX{
            justify-content: center;
            align-content: center;
        }
        .write {
            background-color: rgba(255, 200, 201, 0.55);
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 40%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .title {
            text-align: center;
            font-size: 5.6rem;
            /*font-family: Pretendard;*/
        }
        .form-group {
            display: flex;
            align-items: center;
            /*margin-bottom: 10px;*/
        }
        .form-group label {
            /*width: 80px;*/
            font-weight: bold;
        }
        .form-group input, .form-group textarea {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .form-group textarea {
            resize: vertical;
        }

        .upload-section:hover {
            background-color: #ffe6e6;
        }
        .upload-section input[type="file"] {
            display: none;
        }
        .preview {
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: row;
            align-items: center;
            flex-wrap: wrap;
            overflow-y: auto;
        }
        .preview img {
            object-fit: cover;
            position: relative;
            height: 100px;
            width: 100px;

        }
        .preview .remove {
            /*position: absolute;*/
            background-color: #ff4a4a;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;


        }
        .submit-button {
            background-color: #ff7e81;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        #texta{
            font-size: 20px;
        }



    </style>
<!--</head>-->
<!--<body>-->
<!--<header th:include="~{/html/include/header :: header}" class="header includeJs"></header>-->
<!--</header>-->

<!--<div class="container ">-->

<!--        <div class="write ip12pro cenBOX ">-->

<!--            <div class="title">타임캡슐 게시물 생성</div>-->

<!--            <div class="form-group">-->
<!--                <label for="date" id="texta">봉인일:</label>-->
<!--                <input type="date" id="date">-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="open-date" id="texta">개봉일:</label>-->
<!--                <input type="date" id="open-date">-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="title" id="texta">제목:</label>-->
<!--                <input type="text" id="title" placeholder="우리의 타임캡슐">-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label for="content" id="texta">내용:</label>-->
<!--                <textarea id="content" rows="4" placeholder="1년 후 봉인한 타임캡슐을 열 생각하니 벌써부터 두근두근"></textarea>-->
<!--            </div>-->

<!--            <div class="upload-section" onclick="document.getElementById('file-input').click();">-->
<!--                <input type="file" id="file-input" accept="image/*" multiple onchange="previewImages()">-->
<!--                <p>사진 업로드</p>-->
<!--            </div>-->

<!--            <div class="preview" id="preview"></div>-->

<!--            <button class="submit-button" onclick="submitPost()">게시하기</button>-->

<!--        </div>-->

<!--</div>-->


<!-- footer -->

<!-- //footer -->
<!--</body>-->
<!--<div th:replace="~{/html/include/footer :: footer}"></div>-->
<!--</footer>-->

<script>
    function previewImages() {
        const preview = document.getElementById('preview');
        const files = document.getElementById('file-input').files;
        preview.innerHTML = '';

        Array.from(files).forEach((file, index) => {
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = document.createElement('img');
                img.src = e.target.result;

                const removeButton = document.createElement('button');
                removeButton.className = 'remove';
                removeButton.innerText = 'X';
                removeButton.onclick = () => removeImage(index);

                const imgContainer = document.createElement('div');
                imgContainer.style.position = 'relative';
                imgContainer.appendChild(img);
                imgContainer.appendChild(removeButton);

                preview.appendChild(imgContainer);
            };
            reader.readAsDataURL(file);
        });
    }

    function removeImage(index) {
        const files = Array.from(document.getElementById('file-input').files);
        files.splice(index, 1);

        const dataTransfer = new DataTransfer();
        files.forEach(file => dataTransfer.items.add(file));

        document.getElementById('file-input').files = dataTransfer.files;
        previewImages();
    }

    function submitPost(event) {
        event.preventDefault(); // Prevent the form from submitting the traditional way

        const date = document.getElementById('tcsealingdate').value;
        const openDate = document.getElementById('tcreleasedate').value;
        const title = document.getElementById('tctitle').value;
        const content = document.getElementById('tcdetail').value;

        if (!date) {
            alert('봉인일을 입력해주세요.');
            return;
        } else if (!openDate) {
            alert('개봉일을 입력해주세요.');
            return;
        } else if (!title) {
            alert('제목을 입력해주세요.');
            return;
        } else if (!content) {
            alert('내용을 입력해주세요.');
            return ;
        }
    }

    $("#file").on('change', function () {
        var fileName = $("#file").val();
        $(".upload-name").val(fileName);
    });

</script>
</html>
